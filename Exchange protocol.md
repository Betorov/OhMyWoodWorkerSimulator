#   Протокол обмена данными между пультом управления и станком "СТРОГАЧ"

##   1. "Рукопожатие" и дальнейшие шаги общения со станком "СТРОГАЧ" для пульта управления.

Перед тем, как начинать взаимодействие с устройством, необходимо отослать ему байт 0x0. В случае успеха устройтсво пришлёт в ответ байт 0xE0.
Далее рекомендуется отправить байт 0xF - команда на извлечение параметров бруска. Ответ от устройства описан [тут](https://github.com/Betorov/OhMyWoodWorkerSimulator/new/develop#2-0xf---%D0%B8%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2-%D0%B1%D1%80%D1%83%D1%81%D0%BA%D0%B0).

#   Набор команд для взаимодействия со станком "СТРОГАЧ" и формат ответов.

## Список команд

### 1. **0x0** - рукопожатие с устройством;
| Команда    |
|------------| 
| 0x0        |

Ответ от устройства

| Команда    |
|------------| 
| 0xE0       |

### 2. **0xF** - извлечение параметров бруска;

| Команда    |
|------------| 
| 0xF        |

Ответ от устройства

| Команда    | Начальная точка нода X,Y| Длина бруска      | Ширина бруска    |
|------------|-------------------------|-------------------|------------------|
| 0xA        | 8-byte (2 floats)       | 4-byte float      | 4-byte float     |

### 3. **0xA** - автоматический проход ножа по бруску;

Формат посылаемой команды следующий:

| Команда    | Начальная точка X,Y| Конечная точка X,Y| Ширина ножа    |
|------------|--------------------|-------------------|----------------|
| 0xA        | 8-byte (2 floats)  | 8-byte (2 floats) | 4-byte float   |

Ответ на команду:

| Код    |
|--------| 
| 0xE0   |
- при безошибочной обработке команды

| Код    |
|--------| 
| 0xE1   |
- при ошибке работы с бруском


### 4. **0xB** - ручной проход ножа по бруску;

Формат посылаемой команды следующий:

| Команда    | Направление        | Шаг    | Ширина ножа    |
|------------|--------------------|-------------------|----------------|
| 0xB        | [1-byte](https://github.com/Betorov/OhMyWoodWorkerSimulator/new/develop#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B9-%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F) | 4-byte float | 4-byte float   |

Ответ от устройства:

| Код    |
|--------| 
| 0xE0   |
- при безошибочной обработке команды

| Код    |
|--------| 
| 0xE2   |
- при ошибке работы с бруском

### 5. **0xC** - команда на остановку бруска;

| Команда    |
|------------| 
| 0xС        |

Ответ от устройства:

| Код    |
|--------| 
| 0xE0   |
- при безошибочной обработке команды

## Список значений направления

**0x8** – вверх

**0х4** – вправо 

**0x2** – вниз 

**0x1** – влево 

## Список ошибок

**0xE0** - ошибки нет.

**0xE1** - ошибка при автоматическом проходе ножа.

**0xE2** - ошибка при пошаговом проходе. Достигнут край бруска.

